<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register - Internal Chat</title>
  
  <!-- Tailwind CDN -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  
  <!-- Custom styles -->
  <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/components.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/animations.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/forms.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/effects/water-ripple.css') }}" rel="stylesheet">
  
  <!-- zxcvbn password strength detection library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js"></script>
  
  <style>
    .login-gradient {
      background: linear-gradient(135deg, #1E40AF 0%, #3B82F6 100%);
      position: relative;
      overflow: hidden;
    }
    
    .login-card {
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      border-radius: 1.2rem;
    }
    
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-15px); }
      100% { transform: translateY(0px); }
    }
    
    .float-animation {
      animation: float 6s ease-in-out infinite;
    }
    
    .pulse-animation {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    /* Input focus styles */
    .input-focus-ring:focus {
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
      outline: none;
      border-color: #3B82F6 !important;
    }
    
    /* Password strength indicator */
    .strength-meter {
      height: 4px;
      width: 100%;
      border-radius: 2px;
      margin-top: 6px;
      background: #e5e7eb;
    }
    
    .strength-meter div {
      height: 100%;
      border-radius: 2px;
      transition: width 0.5s ease-in-out, background-color 0.5s ease-in-out;
    }
    
    .strength-weak { background-color: #EF4444; width: 25%; }
    .strength-medium { background-color: #F59E0B; width: 50%; }
    .strength-good { background-color: #10B981; width: 75%; }
    .strength-strong { background-color: #059669; width: 100%; }
    
    /* Enhanced button styles */
    .btn-primary {
      background-color: #3B82F6;
      color: white;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(59, 130, 246, 0.12);
    }
    
    .btn-primary:hover {
      background-color: #2563EB;
      transform: translateY(-1px);
      box-shadow: 0 6px 10px rgba(59, 130, 246, 0.18);
    }
    
    .btn-primary:active {
      transform: translateY(0);
    }
    
    /* Social login button enhancements */
    .social-login-btn {
      transition: all 0.2s ease;
    }
    
    .social-login-btn:hover {
      transform: translateY(-2px);
    }
    
    /* Page transition animations */
    .page-transition {
      position: relative;
      overflow-x: hidden;
    }
    
    @keyframes slideOutRight {
      from { transform: translateX(0); }
      to { transform: translateX(100%); }
    }
    
    @keyframes slideInLeft {
      from { transform: translateX(-100%); }
      to { transform: translateX(0); }
    }
    
    .slide-out-right {
      animation: slideOutRight 0.5s forwards ease-in-out;
    }
    
    .slide-in-left {
      animation: slideInLeft 0.5s forwards ease-in-out;
    }
    
    /* Enhanced form styling */
    .form-input {
      transition: all 0.3s ease;
      border: 1px solid #E5E7EB;
      background-color: #F9FAFB;
      width: 100%;
      box-sizing: border-box;
      height: 46px;
      border-radius: 0.375rem; /* 6px */
    }
    
    .form-input:focus {
      border-color: #3B82F6;
      background-color: white;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
      outline: none;
    }
    
    .form-label {
      font-weight: 500;
      color: #4B5563;
    }
    
    /* New styles for input groups with icons */
    .input-group {
      position: relative;
      margin-bottom: 1rem;
    }
    
    .input-icon {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: #9CA3AF;
      pointer-events: none;
      z-index: 10;
    }
    
    .input-with-icon {
      padding-left: 45px !important;
    }
    
    /* Flash message styling */
    .flash-message {
      border-left: 4px solid transparent;
      animation: fadeIn 0.5s ease-in-out;
    }
    
    .flash-error {
      border-left-color: #EF4444;
      background-color: #FEF2F2;
    }
    
    /* Animation for inputs */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body class="h-screen overflow-hidden font-sans bg-gray-50 text-gray-800 transition-all duration-200">
  <div class="flex h-full flex-row-reverse">
    <!-- Note the flex-row-reverse to invert the layout -->
    
    <!-- Right panel with branding (originally left panel) -->
    <div id="waterPanel" class="hidden md:flex md:w-1/2 login-gradient text-white p-8 flex-col justify-between relative overflow-hidden">
      <!-- Water effect layer -->
      <div class="water-surface"></div>
      
      <!-- Decorative elements -->
      <div class="absolute top-0 left-0 w-full h-full">
        <div class="absolute top-10 left-10 w-64 h-64 bg-white opacity-5 rounded-full float-animation" style="animation-delay: 0s;"></div>
        <div class="absolute bottom-10 right-10 w-40 h-40 bg-white opacity-5 rounded-full float-animation" style="animation-delay: 1s;"></div>
        <div class="absolute top-1/3 right-1/4 w-24 h-24 bg-white opacity-5 rounded-full float-animation" style="animation-delay: 2s;"></div>
      </div>
      
      <!-- Logo and branding -->
      <div id="brandingText" class="relative z-10">
        <div class="flex items-center space-x-3 mb-8">
          <div class="w-12 h-12 rounded-md bg-blue-800 shadow-inner flex items-center justify-center text-xl font-bold overflow-hidden">
            <img src="{{ url_for('static', filename='images/logo.svg') }}" alt="Internal Chat" class="w-full h-full object-cover" onerror="this.outerHTML='I'"/>
          </div>
          <div class="text-2xl font-bold">Internal Chat</div>
        </div>
        <h1 class="text-4xl font-bold mb-6">Join the conversation, <br/>amplify your team.</h1>
        <p class="text-lg text-blue-100 max-w-md">Create an account and experience seamless team communication like never before.</p>
      </div>
      
      <!-- Features list -->
      <div class="relative z-10 space-y-4">
        <div class="flex items-center space-x-3">
          <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
          </div>
          <span>Collaborative workspaces</span>
        </div>
        <div class="flex items-center space-x-3">
          <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
            </svg>
          </div>
          <span>Cloud file storage</span>
        </div>
        <div class="flex items-center space-x-3">
          <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2" />
            </svg>
          </div>
          <span>Advanced project boards</span>
        </div>
      </div>
    </div>
    
    <!-- Left panel with registration form -->
    <div class="w-full md:w-1/2 h-full overflow-y-auto custom-scrollbar py-8 px-6">
      <div class="w-full max-w-md mx-auto">
        <!-- Small logo for mobile view -->
        <div class="md:hidden flex items-center justify-center mb-8">
          <div class="w-12 h-12 rounded-md bg-blue-600 shadow-inner flex items-center justify-center text-xl font-bold overflow-hidden">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Internal Chat" class="w-full h-full object-cover" onerror="this.outerHTML='I'"/>
          </div>
        </div>
        
        <!-- Registration card -->
        <div class="bg-white rounded-xl shadow-xl p-8 login-card border border-gray-100">
          <!-- Form header with tabs -->
          <div class="flex justify-between mb-8">
            <h2 class="text-2xl font-bold text-gray-800">Create Account</h2>
            <a href="{{ url_for('auth.login') }}" class="text-blue-500 hover:text-blue-600 transition-colors" id="loginLink">Sign in</a>
          </div>
          
          <!-- Registration form -->
          <form action="{{ url_for('auth.register') }}" method="post" id="registerForm" class="space-y-5">
            <!-- CSRF protection -->
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            
            <!-- Flash messages -->
            {% with messages = get_flashed_messages() %}
              {% if messages %}
                {% for message in messages %}
                  <div class="flash-message flash-error flex items-start p-4 rounded-md mb-4 text-red-600">
                    <div class="mr-3 flex-shrink-0">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                      </svg>
                    </div>
                    <div>{{ message }}</div>
                  </div>
                {% endfor %}
              {% endif %}
            {% endwith %}
            
            <div class="mb-4">
              <label class="form-label block text-sm font-medium mb-2" for="username">Username</label>
              <div class="relative">
                <div class="input-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                  </svg>
                </div>
                <input type="text" id="username" name="username" class="form-input input-with-icon w-full px-4 py-3 border focus:outline-none" required>
              </div>
            </div>
            
            <div class="mb-4">
              <label class="form-label block text-sm font-medium mb-2" for="email">Email</label>
              <div class="relative">
                <div class="input-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                  </svg>
                </div>
                <input type="email" id="email" name="email" class="form-input input-with-icon w-full px-4 py-3 border focus:outline-none" required>
              </div>
            </div>
            
            <div class="mb-4">
              <label class="form-label block text-sm font-medium mb-2" for="password">Password</label>
              <div class="relative">
                <div class="input-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
                  </svg>
                </div>
                <input type="password" id="password" name="password" class="form-input input-with-icon w-full px-4 py-3 border focus:outline-none" required>
              </div>
              
              <!-- Password strength meter -->
              <div class="strength-meter mt-2">
                <div id="strengthIndicator"></div>
              </div>
              <p class="mt-1 text-xs text-gray-500" id="passwordHint">
                Use 8+ characters with a mix of letters, numbers & symbols
              </p>
            </div>
            
            <div class="mb-4">
              <label class="form-label block text-sm font-medium mb-2" for="confirm_password">Confirm Password</label>
              <div class="relative">
                <div class="input-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                  </svg>
                </div>
                <input type="password" id="confirm_password" name="confirm_password" class="form-input input-with-icon w-full px-4 py-3 border focus:outline-none" required>
              </div>
            </div>
            
            <div class="flex items-center mb-6">
              <input type="checkbox" id="terms" name="terms" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" required>
              <label for="terms" class="ml-2 block text-sm text-gray-600">
                I agree to the 
                <a href="#" class="text-blue-500 hover:text-blue-600 transition-colors">Terms of Service</a>
                and 
                <a href="#" class="text-blue-500 hover:text-blue-600 transition-colors">Privacy Policy</a>
              </label>
            </div>
            
            <button type="submit" class="btn-primary w-full py-3 font-medium rounded-md transition-colors focus:outline-none">
              Create Account
            </button>
          </form>
          
          <!-- Divider -->
          <div class="relative flex py-5 items-center">
            <div class="flex-grow border-t border-gray-200"></div>
            <span class="flex-shrink mx-4 text-sm text-gray-500">Or register with</span>
            <div class="flex-grow border-t border-gray-200"></div>
          </div>
          
          <!-- Social registration buttons -->
          <div class="grid grid-cols-3 gap-3">
            <button class="social-login-btn flex justify-center items-center py-2 px-4 border border-gray-200 rounded-md shadow-sm bg-white hover:bg-gray-50 transition-colors">
              <svg class="h-5 w-5 text-gray-700" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.167 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.605-3.369-1.343-3.369-1.343-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.699 1.028 1.592 1.028 2.683 0 3.841-2.337 4.687-4.565 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.481C19.138 20.161 22 16.416 22 12c0-5.523-4.477-10-10-10z" />
              </svg>
            </button>
            <button class="social-login-btn flex justify-center items-center py-2 px-4 border border-gray-200 rounded-md shadow-sm bg-white hover:bg-gray-50 transition-colors">
              <svg class="h-5 w-5 text-blue-500" viewBox="0 0 24 24" fill="currentColor">
                <path d="M22.675 0H1.325C.593 0 0 .593 0 1.325v21.351C0 23.407.593 24 1.325 24H12.82v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116c.73 0 1.323-.593 1.323-1.325V1.325C24 .593 23.407 0 22.675 0z" />
              </svg>
            </button>
            <button class="social-login-btn flex justify-center items-center py-2 px-4 border border-gray-200 rounded-md shadow-sm bg-white hover:bg-gray-50 transition-colors">
              <svg class="h-5 w-5 text-red-500" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12.545 10.239v3.821h5.445c-.712 2.315-2.647 3.972-5.445 3.972a6.033 6.033 0 110-12.064c1.498 0 2.866.549 3.921 1.453l2.814-2.814A9.969 9.969 0 0012.545 2C7.021 2 2.543 6.477 2.543 12s4.478 10 10.002 10c8.396 0 10.249-7.85 9.426-11.748l-9.426-.013z" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Script references -->
  <script src="{{ url_for('static', filename='js/effects/water-ripple.js') }}"></script>
  <script src="{{ url_for('static', filename='js/ui-effects.js') }}"></script>
  <script src="{{ url_for('static', filename='js/register.js') }}"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Auto focus first input field
      const firstInput = document.querySelector('input[type="text"]');
      if (firstInput) {
        setTimeout(() => {
          firstInput.focus();
        }, 500);
      }
      
      // Add animation to error messages
      const flashMessages = document.querySelectorAll('.flash-message');
      flashMessages.forEach(message => {
        message.addEventListener('click', function() {
          this.style.opacity = '0';
          setTimeout(() => {
            this.remove();
          }, 300);
        });
        
        // Auto hide after 5 seconds
        setTimeout(() => {
          message.style.opacity = '0';
          setTimeout(() => {
            message.remove();
          }, 300);
        }, 5000);
      });
      
      // Password strength detection
      const passwordInput = document.getElementById('password');
      const strengthIndicator = document.getElementById('strengthIndicator');
      const passwordHint = document.getElementById('passwordHint');
      
      if (passwordInput && strengthIndicator) {
        passwordInput.addEventListener('input', function() {
          if (this.value.length === 0) {
            strengthIndicator.className = '';
            strengthIndicator.style.width = '0';
            passwordHint.textContent = 'Use 8+ characters with a mix of letters, numbers & symbols';
            return;
          }
          
          const result = zxcvbn(this.value);
          
          // Update strength indicator
          strengthIndicator.className = '';
          switch(result.score) {
            case 0:
            case 1:
              strengthIndicator.classList.add('strength-weak');
              passwordHint.textContent = 'Password strength: Weak - ' + (result.feedback.suggestions[0] || 'Too short or common');
              break;
            case 2:
              strengthIndicator.classList.add('strength-medium');
              passwordHint.textContent = 'Password strength: Medium - Consider adding more characters';
              break;
            case 3:
              strengthIndicator.classList.add('strength-good');
              passwordHint.textContent = 'Password strength: Good';
              break;
            case 4:
              strengthIndicator.classList.add('strength-strong');
              passwordHint.textContent = 'Password strength: Strong';
              break;
          }
        });
      }
    });
  </script>
</body>
</html> 